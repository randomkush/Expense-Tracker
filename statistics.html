<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>FinanceX- OnlineMoneyManagement</title>
  <meta content="" name="description">
  <meta content="" name="keywords">
  <!-- Pie chart -->

  <style>
    .chart {
      /* margin-right: 300px; */
      width: 1000px;
      height: 600px;
      justify-content: center;
      align-items: left;
    }
    body {
      background: url(/bg5);
    }
  </style>
  <script type="text/javascript">
        var food = 0;
        var health = 0;
        var essen = 0;
        var transport = 0;
        var edu = 0;
        var hhold = 0;
        var others = 0;
        fetch("/food").then(
          res=>{
            res.json().then(
              data=>{
                console.log(data);
                if(data.length > 0) {
                    var temp1 ="";

                    data.forEach((u)=>{
                        food += u.amount;
                    })
                    temp1 += "<tr>"
                    temp1 += "<td>"+"Food"+"</td>"
                    temp1 += "<td>"+food+"</td>"
                    document.getElementById("data1").innerHTML=temp1;
                }
              }
            )
          }
        )
        fetch("/health").then(
          res=>{
            res.json().then(
              data=>{
                console.log(data);
                if(data.length > 0) {
                    var temp2 ="";

                    data.forEach((u)=>{
                        health += u.amount;
                    })
                    temp2 += "<tr>"
                    temp2 += "<td>"+"Health"+"</td>"
                    temp2 += "<td>"+health+"</td>"
                    document.getElementById("data2").innerHTML=temp2;
                }
              }
            )
          }
        )
        fetch("/essen").then(
          res=>{
            res.json().then(
              data=>{
                console.log(data);
                if(data.length > 0) {
                    var temp3 ="";

                    data.forEach((u)=>{
                        essen += u.amount;
                    })
                    temp3 += "<tr>"
                    temp3 += "<td>"+"Essentials"+"</td>"
                    temp3 += "<td>"+essen+"</td>"
                    document.getElementById("data3").innerHTML=temp3;
                }
              }
            )
          }
        )
        fetch("/transport").then(
          res=>{
            res.json().then(
              data=>{
                console.log(data);
                if(data.length > 0) {
                    var temp4 ="";

                    data.forEach((u)=>{
                        transport += u.amount;
                    })
                    temp4 += "<tr>"
                    temp4 += "<td>"+"Transportation"+"</td>"
                    temp4 += "<td>"+transport+"</td>"
                    document.getElementById("data4").innerHTML=temp4;
                }
              }
            )
          }
        )
        fetch("/edu").then(
          res=>{
            res.json().then(
              data=>{
                console.log(data);
                if(data.length > 0) {
                    var temp5 ="";
 
                    data.forEach((u)=>{
                        edu += u.amount;
                    })
                    temp5 += "<tr>"
                    temp5 += "<td>"+"Education"+"</td>"
                    temp5 += "<td>"+edu+"</td>"
                    document.getElementById("data5").innerHTML=temp5;
                }
              }
            )
          }
        )
        fetch("/hhold").then(
          res=>{
            res.json().then(
              data=>{
                console.log(data);
                if(data.length > 0) {
                    var temp6 ="";

                    data.forEach((u)=>{
                        hhold += u.amount;
                    })
                    temp6 += "<tr>"
                    temp6 += "<td>"+"Household"+"</td>"
                    temp6 += "<td>"+hhold+"</td>"
                    document.getElementById("data6").innerHTML=temp6;
                }
              }
            )
          }
        )
        fetch("/others").then(
          res=>{
            res.json().then(
              data=>{
                console.log(data);
                if(data.length > 0) {
                    var temp7 ="";

                    data.forEach((u)=>{
                        others += u.amount;
                    })
                    temp7 += "<tr>"
                    temp7 += "<td>"+"Others"+"</td>"
                    temp7 += "<td>"+others+"</td>"
                    document.getElementById("data7").innerHTML=temp7;
                }
              }
            )
          }
        )
    window.onload = function() {

    var chart = new CanvasJS.Chart("chartContainer", {
      animationEnabled: true,
      title: {
        text: "Mothly Expenditure: Category Wise"
      },
      data: [{
        type: "pie",
        startAngle: 240,
        yValueFormatString: "##0.00\"â‚¹\"",
        indexLabel: "{label} {y}",
        dataPoints: [
          {y: food, label: "Food"},
          {y: health, label: "Health"},
          {y: essen, label: "Essentials"},
          {y: transport, label: "Transportation"},
          {y: edu, label: "Education"},
          {y: hhold, label: "Household"},
          {y: others, label: "Others"}
        ]
      }]
    });
    chart.render();

    }
  </script>

  <!-- Favicons -->
  <link href="/13-14" rel="icon">
  <link href="/13-14" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="/20" rel="stylesheet">
  <link href="/21" rel="stylesheet">
  <link href="/22" rel="stylesheet">
  <link href="/23" rel="stylesheet">
  <link href="/24" rel="stylesheet">
  <link href="/25" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="/28" rel="stylesheet">


</head>

<body>


  <!-- Header  -->
  <header id="header" class="d-flex align-items-center">
    <div class="container d-flex align-items-center justify-content-between">
      <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

      <h1 class="logo"><a href="/home">FINANCEX</a></h1>
     

      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link scrollto active" href="/home">Home</a></li>
          <li><a class="nav-link scrollto" href="/home">About</a></li>

          <li><a class="nav-link scrollto" href="#Total" id="total"></a></li>
          <li><a class="nav-link scrollto" href="#income" id="income"></a></li>
          <li><a class="nav-link scrollto" href="#expense" id="expense"></a></li>
          <li><a class="nav-link scrollto" href="/home"></a></li>
          <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1"
              data-bs-toggle="dropdown" aria-expanded="false">
              Services
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
              <li><a class="dropdown-item" href="/transactionHistory">Expense Tracker</a></li>
              <li><a class="dropdown-item active" href="/statistics">Statistics</a></li>
              <li><a class="dropdown-item " href="/savings">Savings</a></li>
              <li><a class="dropdown-item" href="/investments">Investment Options</a></li>
            </ul>
          </div>

          <i class="bi bi-list mobile-nav-toggle"></i>
      </nav>
    </div>

    </div>
  </header>


  <div id="chartContainer" style="width: 1600px; height: 700px; margin-left: -2.5em; margin-top: 5em; opacity: 0.8; "></div>
  <div>
    <table id="Table" class="table table-striped table-dark"
      style="height: 250px; width: 300px; float: right; align-items:center;position: absolute; margin-left: 75%; margin-top: -550px;">
      <thead>
        <tr>
          <th scope="col">Category</th>
          <th scope="col">Ammount Spent</th>
        </tr>
      </thead>
      <tbody id="data1"></tbody>
      <tbody id="data2"></tbody>
      <tbody id="data3"></tbody>
      <tbody id="data4"></tbody>
      <tbody id="data5"></tbody>
      <tbody id="data6"></tbody>
      <tbody id="data7"></tbody>
    </table>
  </div>

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>
  <div id="preloader"></div>

  <footer id="footer" style="margin-bottom: -10%;">
    <div class="footer-top">
        <div class="container">
            <div class="row">



                <div class="container">
                    <div class="copyright">
                        &copy; Copyright <strong>FINANCEX</strong>. All Rights Reserved
                    </div>
                    <div class="credits">

                        <p>Designed by Team CoDeX (Kushagra Sharma, Mehul Kaushal, Pranjul Mishra & Saloni
                            Srivastava)</p>
                    </div>
                </div>
  </footer>

    <script>
      // Navbar Shit
      var savings = 0;
      var income = "";
      var intIncome = 0;
      fetch("/data2").then(
          res=>{
              res.json().then(
                  data=>{
                      console.log(data); 
                      if(data.length > 0) {

                          data.forEach((u)=>{
                              intIncome += u.income;
                              income += "<p>"+"<br>"+"Income:"+"<br>"+u.income+"</p>";
                              savings += u.Savings;
                          })
                          document.getElementById("income").innerHTML=income;
                      } 
                  }
              ) 
          }
      ) 
      fetch("/data1").then(
          res=>{
              res.json().then(
                  data=>{
                      console.log(data); 
                      if(data.length > 0) {
                          var temp1 = 0;
                          var temp2 = "";

                          data.forEach((u)=>{
                              temp1 += u.amount;
                          })
                          temp2 = "<p>"+"<br>"+"Expense:"+"<br>"+temp1+"</p>"
                          document.getElementById("expense").innerHTML=temp2;
                          var temp3 = intIncome - temp1 - savings;
                          var total = "<p>"+"<br>"+"Total:"+"<br>"+temp3+"</p>";
                          document.getElementById("total").innerHTML=total;
                      } 
                  }
              ) 
          }
      )
      fetch("/data").then(
          res=>{
              res.json().then(
                  data=>{
                      console.log(data); 
                      if(data.length > 0) {
                          var temp1 = 0;
                          var temp2 = "";

                          data.forEach((u)=>{
                              temp1 += u.amount;
                          })
                          temp2 = "<p>"+"<br>"+"Expense:"+"<br>"+temp1+"</p>"
                          document.getElementById("expense").innerHTML=temp2;
                          var temp3 = intIncome - temp1 - savings;
                          var total = "<p>"+"<br>"+"Total:"+"<br>"+temp3+"</p>";
                          document.getElementById("total").innerHTML=total;
                      } 
                  }
              ) 
          }
      )
    </script>

  <!-- Vendor JS Files -->
  <script src="/388"></script>
  <script src="/389"></script>
  <script src="/390"></script>
  <script src="/391"></script>
  <script src="/392"></script>
  <script src="/393"></script>
  <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>

  <!-- Template Main JS File -->
  <script src="/396"></script>

</body>

</html>